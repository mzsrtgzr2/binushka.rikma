<!-- Email Signup Form -->
<div class="email-signup">
  <h3 class="email-signup__title">专砖 专</h3>
  <p class="email-signup__description">拽 注 注 住转 砖转, 爪专 驻专拽 </p>
  
  <form class="email-signup__form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
    <input type="hidden" name="_subject" value="New email signup from website">
    <input type="hidden" name="_language" value="he">
    
    <div class="form__group">
      <input 
        type="email" 
        name="email" 
        class="form__input email-signup__input" 
        placeholder="住 转 转转  砖"
        required
        aria-label="转转 "
      >
    </div>
    
    <button type="submit" class="button button--primary email-signup__button">
      专砖
    </button>
    
    <div class="email-signup__message" id="email-signup-message" style="display: none;"></div>
  </form>
</div>

<script>
  // Hide form if Formspree Form ID is not configured
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.email-signup__form');
    const emailSignup = document.querySelector('.email-signup');
    
    // Hide the entire form if Form ID is still the placeholder
    if (form && form.action.includes('YOUR_FORM_ID')) {
      if (emailSignup) {
        emailSignup.style.display = 'none';
      }
      return; // Exit early if form is not configured
    }
    
    // Handle form submission with user feedback
    const messageDiv = document.getElementById('email-signup-message');
    
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        const button = form.querySelector('.email-signup__button');
        const originalButtonText = button.textContent;
        
        // Show loading state
        button.textContent = '砖...';
        button.disabled = true;
        messageDiv.style.display = 'none';
        
        fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        })
        .then(response => {
          if (response.ok) {
            messageDiv.textContent = '转! 专砖转 爪 ';
            messageDiv.className = 'email-signup__message email-signup__message--success';
            messageDiv.style.display = 'block';
            form.reset();
          } else {
            throw new Error('Network response was not ok');
          }
        })
        .catch(error => {
          messageDiv.textContent = '专注 砖. 住 砖 专 转专.';
          messageDiv.className = 'email-signup__message email-signup__message--error';
          messageDiv.style.display = 'block';
        })
        .finally(() => {
          button.textContent = originalButtonText;
          button.disabled = false;
        });
      });
    }
  });
</script>

